% Thanks to http://tex.stackexchange.com/a/30782/5645 for this
% example!
\documentclass{article}
\usepackage{amsmath}
\usepackage{ amssymb}
\usepackage{mathptmx}
\usepackage{tikz}
\usepackage{pgfplots}
\usepgfplotslibrary{polar}
\usepgfplotslibrary{fillbetween}
\usepackage{tkz-fct}
\usetikzlibrary{angles, quotes}
\usetikzlibrary{arrows.meta, arrows}
\usetikzlibrary{shapes.geometric}
\usetikzlibrary{external}
\tikzexternalize[prefix={external/}]

\tikzset{
    export as png/.style={
        external/system call/.add={}{
            && convert -density #1 -transparent white "\image.pdf" "\image.png"
        },
    },
    export as png/.default={200},
    % Arrow tips
    >=stealth,
}

% pgfplots settings
\input{colors}
\input{pgfplots}

\DeclareSymbolFont{symbolsb}{OMS}{cmsy}{m}{n}
\SetSymbolFont{symbolsb}{bold}{OMS}{cmsy}{b}{n}
\DeclareSymbolFontAlphabet{\mathcal}{symbolsb}

\def\req{\protect\rotatebox{90}{$\scriptstyle=$}}

\newcommand{\addaxes}{\draw (0em,1em) -- (0em,-1em)
                            (-1em,0em) -- (1em,0em);}
\newcommand{\stepfunc}{\draw[line width=1.5pt] (0.65em,0.65em) -- (0,0.65em) 
                                    -- (0,-0.65em) -- (-0.65em,-0.65em);}

\begin{document}

\tikzset{export as png}

\tikzsetnextfilename{area-entre-curvas-polares-2}

% Author: Alfredo SÃ¡nchez Alberca (asalber@ceu.es)
\begin{tikzpicture}
    \begin{polaraxis}[
        scale = 1,
        samples=360, % How many samples to take
        grid=major, % Display both major and minor grids
        ymax=3.7, % Adjust the maximum r value to accommodate your curves
        xtick={0, 90, 180, 270}, % Positions of the ticks in degrees
        xticklabels={$0$, $\pi/2$, $\pi$, $3\pi/2$}, % Custom labels for each tick
        yticklabel style={anchor=north east}, % Adjust label style if necessary
        clip=false, % Prevent clipping of labels
        tick label style={font=\small}, % Adjust font size if necessary
        major grid style={mygray}, % Style for major grids
        myblack
    ]
        % Add the first curve
        \addplot [
            data cs=polar,
            domain=-60:60, % degrees
            name path=A,
            thick,
            myblue
        ] {3*cos(x)};
        % Add the second curve
        \addplot [
            data cs=polar,
            domain=-60:60, % degrees
            name path=B,
            thick,
            myred
        ] {1 + cos(x)};
    
        % Fill between the paths
        \addplot [
            fill=myblue,
            opacity=0.5
        ] fill between [
            of=A and B,
        ];    

        % Add the first curve
        \addplot [
            data cs=polar,
            domain=0:180, % degrees
            name path=A,
            thick,
            myblue
        ] {3*cos(x)};
        \node[myblue] at (axis cs:45,2.7) {$f(\theta) = 3\cos(\theta)$};
        % Add the second curve
        \addplot [
            data cs=polar,
            domain=0:360, % degrees
            thick,
            myred
        ] {1 + cos(x)};                
        \node[myred] at (axis cs:135,2) {$g(\theta) = 1 + \cos(\theta)$};
        \node[myblue] at (axis cs:270,2.5) {$\displaystyle \frac{1}{2}\int_{-\pi/3}^{\pi/3}f(\theta)^2-g(\theta)^2\,d\theta = \pi$};
    \end{polaraxis}
    \end{tikzpicture}
   

\end{document}