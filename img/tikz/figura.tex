% Thanks to http://tex.stackexchange.com/a/30782/5645 for this
% example!
\documentclass{article}
\usepackage{amsmath}
\usepackage{ amssymb}
\usepackage{mathptmx}
\usepackage{tikz}
\usepackage{pgfplots}
%\usepgfplotslibrary{polar}
\usepackage{tkz-fct}
\usetikzlibrary{angles, quotes}
\usetikzlibrary{arrows.meta, arrows}
\usetikzlibrary{external}
\tikzexternalize[prefix={external/}]

\tikzset{
    export as png/.style={
        external/system call/.add={}{
            && convert -density #1 -transparent white "\image.pdf" "\image.png"
        },
    },
    export as png/.default={200},
    % Arrow tips
    >=stealth,
}

% pgfplots settings
\input{colors}
\input{pgfplots}

\DeclareSymbolFont{symbolsb}{OMS}{cmsy}{m}{n}
\SetSymbolFont{symbolsb}{bold}{OMS}{cmsy}{b}{n}
\DeclareSymbolFontAlphabet{\mathcal}{symbolsb}

\def\req{\protect\rotatebox{90}{$\scriptstyle=$}}

\begin{document}

\tikzset{export as png}

\tikzsetnextfilename{proyeccion-producto-escalar}
\begin{tikzpicture}[trim axis left, trim axis right]
  \begin{axis}[
    height=4cm,
    gen2dfun, 
    xmin=0, xmax=3.2,
    ymin=0, ymax=2.5,
    ticks = none,
    %axis equal=true,
    clip=false,
    color = myblack,
    ]
    \coordinate (O) at (0,0);
    \coordinate (A) at (3,1);
    \coordinate (B) at (1,2);
    \coordinate (C) at ($(A)+(B)$);
    \coordinate (D) at (1.5, 0.5);
    \draw[name path = u, ->, myblue, thick] (O) -- (A) node[right] {$\mathbf{u}$} ;
    \draw[name path = v, ->, myblue, thick] (O) -- (B) node[right] {$\mathbf{v}$} ;
    \draw[dashed] (B) -- (D);
    \draw (A) -- (O) -- (B) pic ["$\alpha$", draw, ->] {angle = A--O--B};
    \draw[myred, thick] (O) -- (D) pic [draw, myblack, angle radius=2mm] {right angle = B--D--O};
    \draw [decorate, decoration={brace, amplitude=5pt, mirror}, xshift=-2pt, yshift=-2pt, mygray] (O) -- (D) node [midway, below, sloped, xshift=-2pt, yshift=-2pt, myred] {$|\mathbf{v}|\cos(\alpha)$};
  \end{axis}
\end{tikzpicture}

\end{document}
